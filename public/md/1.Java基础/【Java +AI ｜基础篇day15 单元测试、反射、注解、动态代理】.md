##### 16ğŸ”§ Java Day15 - å•å…ƒæµ‹è¯•ã€åå°„ã€æ³¨è§£ã€åŠ¨æ€ä»£ç†

> ğŸ’¡ **æ ¸å¿ƒæç¤º**ï¼šå•å…ƒæµ‹è¯•ã€åå°„ã€æ³¨è§£å’ŒåŠ¨æ€ä»£ç†æ˜¯ Java é«˜çº§ç‰¹æ€§ï¼Œå¹¿æ³›åº”ç”¨äºæ¡†æ¶å¼€å‘å’Œä¼ä¸šçº§åº”ç”¨ã€‚æœ¬æ–‡ç³»ç»Ÿè®²è§£è¿™äº›æ ¸å¿ƒæ¦‚å¿µï¼Œå¸®ä½ æ·±å…¥ç†è§£ Java é«˜çº§ç¼–ç¨‹ã€‚

---

#### å¿«é€Ÿå›é¡¾

- **å•å…ƒæµ‹è¯•**ï¼šJUnit æ¡†æ¶ï¼ŒéªŒè¯ä»£ç æ­£ç¡®æ€§ï¼Œæ”¯æŒæ–­è¨€å’Œæµ‹è¯•ç”Ÿå‘½å‘¨æœŸ
- **åå°„**ï¼šè¿è¡Œæ—¶è·å–ç±»çš„ä¿¡æ¯å¹¶æ“ä½œç±»æˆå‘˜ï¼Œæ˜¯æ¡†æ¶çš„åŸºç¡€
- **æ³¨è§£**ï¼šå…ƒæ•°æ®æ ‡è®°ï¼Œç¼–è¯‘æ—¶æˆ–è¿è¡Œæ—¶å¤„ç†ï¼Œç®€åŒ–é…ç½®
- **åŠ¨æ€ä»£ç†**ï¼šè¿è¡Œæ—¶åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå®ç° AOP ç­‰é«˜çº§åŠŸèƒ½

---

#### ç›®å½•

- [ä¸€ã€å•å…ƒæµ‹è¯•ï¼ˆJUnitï¼‰](#ä¸€å•å…ƒæµ‹è¯•junit)
  - [1. JUnit åŸºç¡€](#1-junit-åŸºç¡€)
  - [2. å¸¸ç”¨æ–­è¨€](#2-å¸¸ç”¨æ–­è¨€)
  - [3. å‚æ•°åŒ–æµ‹è¯•](#3-å‚æ•°åŒ–æµ‹è¯•)
- [äºŒã€åå°„ï¼ˆReflectionï¼‰](#äºŒåå°„reflection)
  - [1. è·å– Class å¯¹è±¡](#1-è·å–-class-å¯¹è±¡)
  - [2. åå°„æ“ä½œæ„é€ å™¨](#2-åå°„æ“ä½œæ„é€ å™¨)
  - [3. åå°„æ“ä½œæˆå‘˜å˜é‡](#3-åå°„æ“ä½œæˆå‘˜å˜é‡)
  - [4. åå°„æ“ä½œæ–¹æ³•](#4-åå°„æ“ä½œæ–¹æ³•)
  - [5. åå°„çš„åº”ç”¨åœºæ™¯](#5-åå°„çš„åº”ç”¨åœºæ™¯)
- [ä¸‰ã€æ³¨è§£ï¼ˆAnnotationï¼‰](#ä¸‰æ³¨è§£annotation)
  - [1. å†…ç½®æ³¨è§£](#1-å†…ç½®æ³¨è§£)
  - [2. è‡ªå®šä¹‰æ³¨è§£](#2-è‡ªå®šä¹‰æ³¨è§£)
  - [3. ä½¿ç”¨æ³¨è§£](#3-ä½¿ç”¨æ³¨è§£)
  - [4. è¯»å–æ³¨è§£ï¼ˆåå°„ï¼‰](#4-è¯»å–æ³¨è§£åå°„)
- [å››ã€åŠ¨æ€ä»£ç†](#å››åŠ¨æ€ä»£ç†)
  - [1. åŠ¨æ€ä»£ç†çš„æ¦‚å¿µ](#1-åŠ¨æ€ä»£ç†çš„æ¦‚å¿µ)
  - [2. JDK åŠ¨æ€ä»£ç†](#2-jdk-åŠ¨æ€ä»£ç†)
  - [3. CGLIB åŠ¨æ€ä»£ç†](#3-cglib-åŠ¨æ€ä»£ç†)
- [é—®ç­”](#é—®ç­”)

---

#### è¯¦ç»†å†…å®¹

##### ä¸€ã€å•å…ƒæµ‹è¯•ï¼ˆJUnitï¼‰

#### 1. JUnit åŸºç¡€

```java
import org.junit.jupiter.api.*;
import static org.junit.jupiter.api.Assertions.*;

public class CalculatorTest {
    private Calculator calculator;
    
    @BeforeAll  // æ‰€æœ‰æµ‹è¯•å‰æ‰§è¡Œä¸€æ¬¡
    static void initAll() {
        System.out.println("æµ‹è¯•å¼€å§‹");
    }
    
    @BeforeEach  // æ¯ä¸ªæµ‹è¯•å‰æ‰§è¡Œ
    void init() {
        calculator = new Calculator();
    }
    
    @Test
    @DisplayName("æµ‹è¯•åŠ æ³•")
    void testAdd() {
        int result = calculator.add(2, 3);
        assertEquals(5, result, "2 + 3 åº”è¯¥ç­‰äº 5");
    }
    
    @Test
    @DisplayName("æµ‹è¯•é™¤æ³•")
    void testDivide() {
        assertThrows(ArithmeticException.class, () -> {
            calculator.divide(1, 0);
        }, "é™¤æ•°ä¸ºé›¶åº”è¯¥æŠ›å‡ºå¼‚å¸¸");
    }
    
    @AfterEach  // æ¯ä¸ªæµ‹è¯•åæ‰§è¡Œ
    void tearDown() {
        calculator = null;
    }
    
    @AfterAll  // æ‰€æœ‰æµ‹è¯•åæ‰§è¡Œä¸€æ¬¡
    static void tearDownAll() {
        System.out.println("æµ‹è¯•ç»“æŸ");
    }
}
```

**JUnit æµ‹è¯•ç”Ÿå‘½å‘¨æœŸ**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              JUnit æµ‹è¯•ç”Ÿå‘½å‘¨æœŸ                  â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    æµ‹è¯•ç±»åŠ è½½                          â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  @BeforeAll (é™æ€æ–¹æ³•ï¼Œæ‰€æœ‰æµ‹è¯•å‰æ‰§è¡Œä¸€æ¬¡)            â”‚ â”‚
â”‚   â”‚  â€¢ åˆå§‹åŒ–é™æ€èµ„æº                                      â”‚ â”‚
â”‚   â”‚  â€¢ å»ºç«‹æ•°æ®åº“è¿æ¥                                      â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    æµ‹è¯•æ–¹æ³•1                          â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  @BeforeEach (æ¯ä¸ªæµ‹è¯•å‰æ‰§è¡Œ)                   â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ åˆ›å»ºæµ‹è¯•å¯¹è±¡                                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ å‡†å¤‡æµ‹è¯•æ•°æ®                                  â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  @Test (æ‰§è¡Œæµ‹è¯•é€»è¾‘)                           â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ è°ƒç”¨è¢«æµ‹æ–¹æ³•                                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ éªŒè¯ç»“æœï¼ˆæ–­è¨€ï¼‰                              â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  @AfterEach (æ¯ä¸ªæµ‹è¯•åæ‰§è¡Œ)                    â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ æ¸…ç†æµ‹è¯•æ•°æ®                                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ é‡Šæ”¾èµ„æº                                      â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    æµ‹è¯•æ–¹æ³•2                          â”‚ â”‚
â”‚   â”‚  (åŒæµ‹è¯•æ–¹æ³•1çš„æµç¨‹)                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    æµ‹è¯•æ–¹æ³•N                          â”‚ â”‚
â”‚   â”‚  (åŒæµ‹è¯•æ–¹æ³•1çš„æµç¨‹)                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  @AfterAll (é™æ€æ–¹æ³•ï¼Œæ‰€æœ‰æµ‹è¯•åæ‰§è¡Œä¸€æ¬¡)             â”‚ â”‚
â”‚   â”‚  â€¢ å…³é—­æ•°æ®åº“è¿æ¥                                      â”‚ â”‚
â”‚   â”‚  â€¢ æ¸…ç†é™æ€èµ„æº                                      â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚   ç‰¹ç‚¹ï¼š                                                    â”‚
â”‚   â€¢ @BeforeAll å’Œ @AfterAll åªæ‰§è¡Œä¸€æ¬¡                      â”‚
â”‚   â€¢ @BeforeEach å’Œ @AfterEach æ¯ä¸ªæµ‹è¯•éƒ½æ‰§è¡Œ                â”‚
â”‚   â€¢ æµ‹è¯•æ–¹æ³•ä¹‹é—´ç›¸äº’ç‹¬ç«‹                                    â”‚
â”‚   â€¢ æ‰§è¡Œé¡ºåºä¸ä¿è¯ï¼ˆå¯ä½¿ç”¨ @Order æŒ‡å®šï¼‰                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. å¸¸ç”¨æ–­è¨€

```java
// ç›¸ç­‰æ–­è¨€
assertEquals(expected, actual);
assertEquals(expected, actual, "é”™è¯¯æ¶ˆæ¯");

// çœŸ/å‡æ–­è¨€
assertTrue(condition);
assertFalse(condition);

// ç©ºæ–­è¨€
assertNull(object);
assertNotNull(object);

// ç›¸åŒå¼•ç”¨
assertSame(expected, actual);
assertNotSame(expected, actual);

// å¼‚å¸¸æ–­è¨€
assertThrows(Exception.class, () -> { /* ä»£ç  */ });

// æ•°ç»„æ–­è¨€
assertArrayEquals(expectedArray, actualArray);

// å…¨éƒ¨æ–­è¨€ï¼ˆç»„åˆï¼‰
assertAll("ç”¨æˆ·éªŒè¯",
    () -> assertEquals("å¼ ä¸‰", user.getName()),
    () -> assertEquals(20, user.getAge()),
    () -> assertNotNull(user.getEmail())
);
```

#### 3. å‚æ•°åŒ–æµ‹è¯•

```java
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.*;

@ParameterizedTest
@ValueSource(strings = {"racecar", "radar", "level"})
void isPalindrome(String candidate) {
    assertTrue(StringUtils.isPalindrome(candidate));
}

@ParameterizedTest
@CsvSource({
    "1, 1, 2",      // a, b, expected
    "2, 3, 5",
    "10, 20, 30"
})
void add(int a, int b, int expected) {
    assertEquals(expected, calculator.add(a, b));
}
```

---

##### äºŒã€åå°„ï¼ˆReflectionï¼‰

#### 1. è·å– Class å¯¹è±¡

```java
// æ–¹å¼1ï¼šç±»å.class
Class<String> clazz1 = String.class;

// æ–¹å¼2ï¼šå¯¹è±¡.getClass()
String str = "Hello";
Class<? extends String> clazz2 = str.getClass();

// æ–¹å¼3ï¼šClass.forName()
Class<?> clazz3 = Class.forName("java.lang.String");
```

#### 2. åå°„æ“ä½œæ„é€ å™¨

```java
public class Person {
    private String name;
    private int age;
    
    public Person() {}
    
    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
}

// åå°„åˆ›å»ºå¯¹è±¡
Class<Person> clazz = Person.class;

// æ— å‚æ„é€ 
Person p1 = clazz.newInstance();  // JDK9+ å·²åºŸå¼ƒ
Person p2 = clazz.getDeclaredConstructor().newInstance();

// æœ‰å‚æ„é€ 
Constructor<Person> constructor = clazz.getDeclaredConstructor(String.class, int.class);
Person p3 = constructor.newInstance("å¼ ä¸‰", 20);
```

#### 3. åå°„æ“ä½œæˆå‘˜å˜é‡

```java
Class<Person> clazz = Person.class;
Person person = clazz.getDeclaredConstructor().newInstance();

// è·å–å­—æ®µ
Field nameField = clazz.getDeclaredField("name");

// è®¾ç½®å¯è®¿é—®ï¼ˆç§æœ‰å­—æ®µï¼‰
nameField.setAccessible(true);

// è®¾ç½®å€¼
nameField.set(person, "æå››");

// è·å–å€¼
String name = (String) nameField.get(person);
```

#### 4. åå°„æ“ä½œæ–¹æ³•

```java
Class<Person> clazz = Person.class;
Person person = clazz.getDeclaredConstructor().newInstance();

// è·å–æ–¹æ³•
Method setNameMethod = clazz.getDeclaredMethod("setName", String.class);
Method getNameMethod = clazz.getDeclaredMethod("getName");

// è°ƒç”¨æ–¹æ³•
setNameMethod.invoke(person, "ç‹äº”");
String name = (String) getNameMethod.invoke(person);
```

#### 5. åå°„çš„åº”ç”¨åœºæ™¯

- **æ¡†æ¶å¼€å‘**ï¼šSpringã€Hibernate ç­‰æ¡†æ¶çš„æ ¸å¿ƒ
- **IDE åŠŸèƒ½**ï¼šä»£ç æç¤ºã€é‡æ„
- **åºåˆ—åŒ–/ååºåˆ—åŒ–**ï¼šJSON è½¬æ¢
- **åŠ¨æ€ä»£ç†**ï¼šAOP å®ç°

**åå°„æ“ä½œæµç¨‹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åå°„æ“ä½œæµç¨‹                     â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              1. è·å– Class å¯¹è±¡                        â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  æ–¹å¼1ï¼šç±»å.class                             â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Class<String> clazz = String.class;           â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  æ–¹å¼2ï¼šå¯¹è±¡.getClass()                         â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Class<? extends String> clazz = str.getClass();â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  æ–¹å¼3ï¼šClass.forName()                        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Class<?> clazz = Class.forName("java.lang.String");â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              2. åå°„æ“ä½œæ„é€ å™¨                        â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  è·å–æ„é€ å™¨ï¼š                                   â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Constructor<?>[] constructors = clazz.getConstructors();â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Constructor<T> constructor = clazz.getDeclaredConstructor();â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  åˆ›å»ºå¯¹è±¡ï¼š                                     â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Object obj = constructor.newInstance(args);   â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              3. åå°„æ“ä½œæˆå‘˜å˜é‡                        â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  è·å–å­—æ®µï¼š                                     â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Field field = clazz.getDeclaredField("fieldName");â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  è®¾ç½®å¯è®¿é—®ï¼š                                   â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  field.setAccessible(true);  // ç§æœ‰å­—æ®µ        â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  è®¾ç½®/è·å–å€¼ï¼š                                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  field.set(obj, value);                        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Object value = field.get(obj);                 â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              4. åå°„æ“ä½œæ–¹æ³•                          â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  è·å–æ–¹æ³•ï¼š                                     â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Method method = clazz.getDeclaredMethod("methodName", paramTypes);â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  è°ƒç”¨æ–¹æ³•ï¼š                                     â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Object result = method.invoke(obj, args);     â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚   åº”ç”¨åœºæ™¯ï¼š                                                â”‚
â”‚   â€¢ æ¡†æ¶å¼€å‘ï¼ˆSpringã€Hibernateï¼‰                           â”‚
â”‚   â€¢ IDE åŠŸèƒ½ï¼ˆä»£ç æç¤ºã€é‡æ„ï¼‰                              â”‚
â”‚   â€¢ åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼ˆJSON è½¬æ¢ï¼‰                            â”‚
â”‚   â€¢ åŠ¨æ€ä»£ç†ï¼ˆAOP å®ç°ï¼‰                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

##### ä¸‰ã€æ³¨è§£ï¼ˆAnnotationï¼‰

#### 1. å†…ç½®æ³¨è§£

```java
@Override          // æ ‡è®°æ–¹æ³•é‡å†™
@Deprecated       // æ ‡è®°å·²è¿‡æ—¶
@SuppressWarnings // æŠ‘åˆ¶è­¦å‘Š
@FunctionalInterface  // æ ‡è®°å‡½æ•°å¼æ¥å£
```

#### 2. è‡ªå®šä¹‰æ³¨è§£

```java
import java.lang.annotation.*;

// å…ƒæ³¨è§£
@Target({ElementType.TYPE, ElementType.METHOD})  // ä½œç”¨ç›®æ ‡
@Retention(RetentionPolicy.RUNTIME)              // ä¿ç•™ç­–ç•¥
@Documented                                       // åŒ…å«åœ¨æ–‡æ¡£ä¸­
@Inherited                                        // å¯ç»§æ‰¿
public @interface MyAnnotation {
    String value() default "";      // é»˜è®¤å±æ€§
    int count() default 0;
    String[] tags() default {};
}
```

**å…ƒæ³¨è§£è¯´æ˜**ï¼š

| å…ƒæ³¨è§£ | ä½œç”¨ |
|--------|------|
| @Target | æ³¨è§£å¯åº”ç”¨çš„ä½ç½®ï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µç­‰ï¼‰|
| @Retention | æ³¨è§£ä¿ç•™ç­–ç•¥ï¼ˆSOURCEã€CLASSã€RUNTIMEï¼‰|
| @Documented | æ³¨è§£æ˜¯å¦åŒ…å«åœ¨ JavaDoc ä¸­ |
| @Inherited | æ³¨è§£æ˜¯å¦å¯è¢«å­ç±»ç»§æ‰¿ |
| @Repeatable | æ³¨è§£æ˜¯å¦å¯é‡å¤åº”ç”¨ |

#### 3. ä½¿ç”¨æ³¨è§£

```java
@MyAnnotation(value = "æµ‹è¯•", count = 5, tags = {"a", "b"})
public class MyClass {
    
    @MyAnnotation("æ–¹æ³•æ³¨è§£")
    public void myMethod() {}
}
```

#### 4. è¯»å–æ³¨è§£ï¼ˆåå°„ï¼‰

```java
// è·å–ç±»ä¸Šçš„æ³¨è§£
MyAnnotation annotation = MyClass.class.getAnnotation(MyAnnotation.class);
String value = annotation.value();
int count = annotation.count();

// è·å–æ–¹æ³•ä¸Šçš„æ³¨è§£
Method method = MyClass.class.getMethod("myMethod");
MyAnnotation methodAnno = method.getAnnotation(MyAnnotation.class);
```

**æ³¨è§£ç”Ÿå‘½å‘¨æœŸ**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ³¨è§£ç”Ÿå‘½å‘¨æœŸï¼ˆRetentionPolicyï¼‰      â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    æºä»£ç é˜¶æ®µ                           â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  @Override                                     â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  @SuppressWarnings("unchecked")                â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚              â”‚                                        â”‚ â”‚
â”‚   â”‚              â–¼                                        â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  SOURCE ç­–ç•¥ï¼šåªåœ¨æºç ä¸­ä¿ç•™                     â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ ç¼–è¯‘åä¸¢å¼ƒ                                   â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ ç¼–è¯‘å™¨ä½¿ç”¨ï¼ˆå¦‚ @Overrideï¼‰                    â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    ç¼–è¯‘é˜¶æ®µ                           â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  CLASS ç­–ç•¥ï¼šä¿ç•™åˆ°å­—èŠ‚ç                        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ è¿è¡Œæ—¶ä¸å¯è·å–                               â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ å­—èŠ‚ç å·¥å…·ä½¿ç”¨ï¼ˆå¦‚å­—èŠ‚ç å¢å¼ºï¼‰                â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ é»˜è®¤ä¿ç•™ç­–ç•¥                                 â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    è¿è¡Œé˜¶æ®µ                           â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  RUNTIME ç­–ç•¥ï¼šä¿ç•™åˆ°è¿è¡Œæ—¶                      â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ å¯é€šè¿‡åå°„è·å–                               â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ æ¡†æ¶ä½¿ç”¨ï¼ˆå¦‚ Spring çš„ @Componentï¼‰           â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â€¢ è¿è¡Œæ—¶åŠ¨æ€å¤„ç†                               â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â”‚              â”‚                                        â”‚ â”‚
â”‚   â”‚              â–¼                                        â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  åå°„è¯»å–æ³¨è§£ï¼š                                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  MyAnnotation anno = clazz.getAnnotation(...); â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚   å¯¹æ¯”ï¼š                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚   SOURCE     â”‚   CLASS      â”‚   RUNTIME    â”‚          â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚   â”‚ ç¼–è¯‘åä¸¢å¼ƒ   â”‚ ä¿ç•™åˆ°å­—èŠ‚ç  â”‚ ä¿ç•™åˆ°è¿è¡Œæ—¶ â”‚          â”‚
â”‚   â”‚ ç¼–è¯‘å™¨ä½¿ç”¨   â”‚ å­—èŠ‚ç å·¥å…·   â”‚ åå°„è·å–     â”‚          â”‚
â”‚   â”‚ @Override   â”‚ æ³¨è§£å¤„ç†å™¨   â”‚ @Component   â”‚          â”‚
â”‚   â”‚ @SuppressWarningsâ”‚           â”‚ @Entity      â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ³¨è§£ä½¿ç”¨æµç¨‹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ³¨è§£ä½¿ç”¨æµç¨‹                     â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              1. å®šä¹‰æ³¨è§£ï¼ˆè‡ªå®šä¹‰æ³¨è§£ï¼‰                 â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  @Target(ElementType.TYPE)  // ä½œç”¨ç›®æ ‡        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  @Retention(RetentionPolicy.RUNTIME) // ä¿ç•™ç­–ç•¥â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  public @interface MyAnnotation {               â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      String value() default "";                â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      int count() default 0;                     â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  }                                              â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              2. ä½¿ç”¨æ³¨è§£ï¼ˆæ ‡è®°ä»£ç ï¼‰                   â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  @MyAnnotation(value = "æµ‹è¯•", count = 5)      â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  public class MyClass {                         â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      @MyAnnotation("æ–¹æ³•æ³¨è§£")                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      public void myMethod() {}                 â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  }                                              â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              3. è¯»å–æ³¨è§£ï¼ˆåå°„è§£æï¼‰                   â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  // è·å–ç±»æ³¨è§£                                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  MyAnnotation anno = MyClass.class            â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      .getAnnotation(MyAnnotation.class);       â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  String value = anno.value();                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚                                                 â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  // è·å–æ–¹æ³•æ³¨è§£                                â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  Method method = MyClass.class                â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      .getMethod("myMethod");                   â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  MyAnnotation methodAnno = method            â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      .getAnnotation(MyAnnotation.class);       â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              4. å¤„ç†æ³¨è§£ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰                   â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  if (anno != null) {                           â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      // æ ¹æ®æ³¨è§£ä¿¡æ¯æ‰§è¡Œç›¸åº”æ“ä½œ                â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      System.out.println("æ³¨è§£å€¼ï¼š" + value);   â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  }                                             â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚   åº”ç”¨åœºæ™¯ï¼š                                                â”‚
â”‚   â€¢ Spring æ¡†æ¶ï¼ˆ@Componentã€@Autowiredã€@Serviceï¼‰          â”‚
â”‚   â€¢ JPA æŒä¹…åŒ–ï¼ˆ@Entityã€@Tableã€@Columnï¼‰                  â”‚
â”‚   â€¢ å•å…ƒæµ‹è¯•ï¼ˆ@Testã€@Beforeã€@Afterï¼‰                      â”‚
â”‚   â€¢ æ–‡æ¡£ç”Ÿæˆï¼ˆ@Documentedï¼‰                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

##### å››ã€åŠ¨æ€ä»£ç†

#### 1. åŠ¨æ€ä»£ç†çš„æ¦‚å¿µ

åœ¨è¿è¡Œæ—¶åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œåœ¨ä¸ä¿®æ”¹åŸç±»çš„æƒ…å†µä¸‹å¢å¼ºåŠŸèƒ½ã€‚

#### 2. JDK åŠ¨æ€ä»£ç†

```java
import java.lang.reflect.*;

// æ¥å£
public interface UserService {
    void addUser(String name);
    void deleteUser(String name);
}

// å®ç°ç±»
public class UserServiceImpl implements UserService {
    @Override
    public void addUser(String name) {
        System.out.println("æ·»åŠ ç”¨æˆ·ï¼š" + name);
    }
    
    @Override
    public void deleteUser(String name) {
        System.out.println("åˆ é™¤ç”¨æˆ·ï¼š" + name);
    }
}

// ä»£ç†å¤„ç†å™¨
public class LogHandler implements InvocationHandler {
    private Object target;
    
    public LogHandler(Object target) {
        this.target = target;
    }
    
    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        System.out.println("[æ—¥å¿—] å¼€å§‹æ‰§è¡Œï¼š" + method.getName());
        Object result = method.invoke(target, args);
        System.out.println("[æ—¥å¿—] æ‰§è¡Œç»“æŸï¼š" + method.getName());
        return result;
    }
}

// åˆ›å»ºä»£ç†
UserService target = new UserServiceImpl();
UserService proxy = (UserService) Proxy.newProxyInstance(
    target.getClass().getClassLoader(),
    target.getClass().getInterfaces(),
    new LogHandler(target)
);

proxy.addUser("å¼ ä¸‰");  // è‡ªåŠ¨è®°å½•æ—¥å¿—
```

#### 3. CGLIB åŠ¨æ€ä»£ç†

```java
import net.sf.cglib.proxy.*;

// æ–¹æ³•æ‹¦æˆªå™¨
public class CglibProxy implements MethodInterceptor {
    @Override
    public Object intercept(Object obj, Method method, 
            Object[] args, MethodProxy proxy) throws Throwable {
        System.out.println("CGLIB å‰ç½®å¢å¼º");
        Object result = proxy.invokeSuper(obj, args);
        System.out.println("CGLIB åç½®å¢å¼º");
        return result;
    }
}

// åˆ›å»ºä»£ç†
Enhancer enhancer = new Enhancer();
enhancer.setSuperclass(UserServiceImpl.class);
enhancer.setCallback(new CglibProxy());
UserServiceImpl proxy = (UserServiceImpl) enhancer.create();

proxy.addUser("æå››");
```

**JDK ä»£ç† vs CGLIB ä»£ç†**ï¼š

| ç‰¹æ€§ | JDK ä»£ç† | CGLIB ä»£ç† |
|------|----------|------------|
| ä¾èµ– | JDK å†…ç½® | ç¬¬ä¸‰æ–¹åº“ |
| è¦æ±‚ | å¿…é¡»å®ç°æ¥å£ | ä¸éœ€è¦æ¥å£ |
| åŸç† | å®ç°æ¥å£ | ç»§æ‰¿ç›®æ ‡ç±» |
| æ€§èƒ½ | ç¨æ…¢ï¼ˆåå°„ï¼‰| è¾ƒå¿«ï¼ˆå­—èŠ‚ç ï¼‰|
| final æ–¹æ³• | æ”¯æŒ | ä¸æ”¯æŒï¼ˆæ— æ³•é‡å†™ï¼‰|

**åŠ¨æ€ä»£ç†å·¥ä½œæµç¨‹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åŠ¨æ€ä»£ç†å·¥ä½œæµç¨‹                 â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              1. å®šä¹‰æ¥å£ï¼ˆJDKä»£ç†ï¼‰                    â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  public interface UserService {               â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      void addUser(String name);               â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      void deleteUser(String name);            â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  }                                             â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              2. å®ç°ç›®æ ‡ç±»                           â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  public class UserServiceImpl                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      implements UserService {                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      public void addUser(String name) {        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚          System.out.println("æ·»åŠ ç”¨æˆ·ï¼š" + name);â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      }                                         â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  }                                             â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              3. åˆ›å»ºä»£ç†å¤„ç†å™¨                        â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  public class LogHandler                        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      implements InvocationHandler {             â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      private Object target;                      â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      public Object invoke(Object proxy,         â”‚  â”‚ â”‚
â”‚   â”‚  â”‚          Method method, Object[] args) {        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚          System.out.println("å‰ç½®å¢å¼º");        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚          Object result = method.invoke(target, args);â”‚  â”‚ â”‚
â”‚   â”‚  â”‚          System.out.println("åç½®å¢å¼º");        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚          return result;                          â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      }                                         â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  }                                             â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              4. åˆ›å»ºä»£ç†å¯¹è±¡                          â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  UserService target = new UserServiceImpl();  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  UserService proxy = (UserService) Proxy       â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      .newProxyInstance(                        â”‚  â”‚ â”‚
â”‚   â”‚  â”‚          target.getClass().getClassLoader(),   â”‚  â”‚ â”‚
â”‚   â”‚  â”‚          target.getClass().getInterfaces(),    â”‚  â”‚ â”‚
â”‚   â”‚  â”‚          new LogHandler(target)               â”‚  â”‚ â”‚
â”‚   â”‚  â”‚      );                                        â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              5. è°ƒç”¨ä»£ç†å¯¹è±¡                          â”‚ â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚   â”‚  â”‚  proxy.addUser("å¼ ä¸‰");                         â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  â†“                                             â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  [å‰ç½®å¢å¼º]                                    â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  æ·»åŠ ç”¨æˆ·ï¼šå¼ ä¸‰                                  â”‚  â”‚ â”‚
â”‚   â”‚  â”‚  [åç½®å¢å¼º]                                    â”‚  â”‚ â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚   è°ƒç”¨æµç¨‹ï¼š                                                â”‚
â”‚   å®¢æˆ·ç«¯ â†’ ä»£ç†å¯¹è±¡ â†’ InvocationHandler.invoke()          â”‚
â”‚         â†’ ç›®æ ‡å¯¹è±¡æ–¹æ³• â†’ è¿”å›ç»“æœ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**JDK ä»£ç† vs CGLIB ä»£ç†å¯¹æ¯”**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         JDK åŠ¨æ€ä»£ç† vs CGLIB åŠ¨æ€ä»£ç†å¯¹æ¯”        â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚      JDK åŠ¨æ€ä»£ç†         â”‚    â”‚     CGLIB åŠ¨æ€ä»£ç†      â”‚ â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚   â”‚ ä¾èµ–ï¼šJDK å†…ç½®          â”‚    â”‚ ä¾èµ–ï¼šç¬¬ä¸‰æ–¹åº“ cglib    â”‚ â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚   â”‚ è¦æ±‚ï¼šå¿…é¡»å®ç°æ¥å£       â”‚    â”‚ è¦æ±‚ï¼šä¸éœ€è¦æ¥å£         â”‚ â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚   â”‚ åŸç†ï¼šå®ç°æ¥å£           â”‚    â”‚ åŸç†ï¼šç»§æ‰¿ç›®æ ‡ç±»         â”‚ â”‚
â”‚   â”‚       ç”Ÿæˆä»£ç†ç±»        â”‚    â”‚       ç”Ÿæˆå­ç±»          â”‚ â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚   â”‚ æ€§èƒ½ï¼šç¨æ…¢              â”‚    â”‚ æ€§èƒ½ï¼šè¾ƒå¿«              â”‚ â”‚
â”‚   â”‚       (ä½¿ç”¨åå°„)        â”‚    â”‚       (å­—èŠ‚ç æ“ä½œ)      â”‚ â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚   â”‚ final æ–¹æ³•ï¼šæ”¯æŒ         â”‚    â”‚ final æ–¹æ³•ï¼šä¸æ”¯æŒ      â”‚
â”‚   â”‚       (æ¥å£æ–¹æ³•)        â”‚    â”‚       (æ— æ³•é‡å†™)        â”‚ â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚   â”‚ åˆ›å»ºæ–¹å¼ï¼š               â”‚    â”‚ åˆ›å»ºæ–¹å¼ï¼š               â”‚ â”‚
â”‚   â”‚ Proxy.newProxyInstance()â”‚    â”‚ Enhancer.create()       â”‚ â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚   â”‚ å¤„ç†å™¨ï¼š                 â”‚    â”‚ å¤„ç†å™¨ï¼š                 â”‚ â”‚
â”‚   â”‚ InvocationHandler       â”‚    â”‚ MethodInterceptor       â”‚ â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚   â”‚ é€‚ç”¨åœºæ™¯ï¼š               â”‚    â”‚ é€‚ç”¨åœºæ™¯ï¼š               â”‚ â”‚
â”‚   â”‚ â€¢ æœ‰æ¥å£çš„ç±»            â”‚    â”‚ â€¢ æ— æ¥å£çš„ç±»            â”‚ â”‚
â”‚   â”‚ â€¢ Spring AOP é»˜è®¤       â”‚    â”‚ â€¢ Spring AOP å¤‡é€‰       â”‚
â”‚   â”‚ â€¢ RPC æ¡†æ¶              â”‚    â”‚ â€¢ Hibernate æ‡’åŠ è½½      â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚   é€‰æ‹©å»ºè®®ï¼š                                                â”‚
â”‚   â€¢ æœ‰æ¥å£ â†’ ä¼˜å…ˆä½¿ç”¨ JDK ä»£ç†                              â”‚
â”‚   â€¢ æ— æ¥å£ â†’ ä½¿ç”¨ CGLIB ä»£ç†                                â”‚
â”‚   â€¢ æ€§èƒ½è¦æ±‚é«˜ â†’ CGLIB ä»£ç†                                  â”‚
â”‚   â€¢ éœ€è¦ä»£ç† final æ–¹æ³• â†’ JDK ä»£ç†                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### é—®ç­”

##### Q1ï¼šåå°„çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ

**ç­”**ï¼š
- **ä¼˜ç‚¹**ï¼š
  - è¿è¡Œæ—¶åŠ¨æ€è·å–ç±»ä¿¡æ¯
  - å®ç°æ¡†æ¶çš„çµæ´»æ€§å’Œæ‰©å±•æ€§
  - è§£è€¦ï¼Œæé«˜ä»£ç é€šç”¨æ€§
- **ç¼ºç‚¹**ï¼š
  - æ€§èƒ½è¾ƒä½ï¼ˆç»•è¿‡ç¼–è¯‘å™¨ä¼˜åŒ–ï¼‰
  - ç ´åå°è£…æ€§ï¼ˆå¯è®¿é—®ç§æœ‰æˆå‘˜ï¼‰
  - ä»£ç å¯è¯»æ€§å·®
- **å»ºè®®**ï¼šæ¡†æ¶å¼€å‘ä½¿ç”¨ï¼Œä¸šåŠ¡ä»£ç é¿å…ã€‚

##### Q2ï¼šæ³¨è§£çš„ RetentionPolicy æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**ç­”**ï¼š
- **SOURCE**ï¼šæ³¨è§£åªåœ¨æºç ä¸­ä¿ç•™ï¼Œç¼–è¯‘åä¸¢å¼ƒï¼ˆå¦‚ @Overrideï¼‰ã€‚
- **CLASS**ï¼šæ³¨è§£ä¿ç•™åˆ°å­—èŠ‚ç ï¼Œä½†è¿è¡Œæ—¶ä¸å¯è·å–ï¼ˆé»˜è®¤ï¼‰ã€‚
- **RUNTIME**ï¼šæ³¨è§£ä¿ç•™åˆ°è¿è¡Œæ—¶ï¼Œå¯é€šè¿‡åå°„è·å–ï¼ˆå¦‚ @Entityï¼‰ã€‚

##### Q3ï¼šåŠ¨æ€ä»£ç†çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ

**ç­”**ï¼š
- **AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰**ï¼šæ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ã€æƒé™æ§åˆ¶
- **RPC æ¡†æ¶**ï¼šè¿œç¨‹æ–¹æ³•è°ƒç”¨çš„å®¢æˆ·ç«¯ä»£ç†
- **å»¶è¿ŸåŠ è½½**ï¼šHibernate çš„æ‡’åŠ è½½
- **è¿æ¥æ± **ï¼šæ•°æ®åº“è¿æ¥çš„ä»£ç†

##### Q4ï¼šJUnit 4 å’Œ JUnit 5 æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**ç­”**ï¼š
- **æ¶æ„**ï¼šJUnit 5 é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼ˆJUnit Platform + Jupiter + Vintageï¼‰ã€‚
- **æ³¨è§£**ï¼šJUnit 5 ä½¿ç”¨ `@BeforeEach` æ›¿ä»£ `@Before`ï¼Œ`@AfterEach` æ›¿ä»£ `@After`ã€‚
- **æ‰©å±•**ï¼šJUnit 5 æ”¯æŒæ›´å¼ºå¤§çš„æ‰©å±•æœºåˆ¶ã€‚
- **å‚æ•°åŒ–æµ‹è¯•**ï¼šJUnit 5 çš„å‚æ•°åŒ–æµ‹è¯•æ›´çµæ´»ã€‚
- **Java ç‰ˆæœ¬**ï¼šJUnit 5 éœ€è¦ Java 8+ã€‚

##### Q5ï¼šåå°„å¦‚ä½•ç ´åå•ä¾‹æ¨¡å¼ï¼Ÿå¦‚ä½•é˜²èŒƒï¼Ÿ

**ç­”**ï¼š
```java
// åå°„ç ´åå•ä¾‹
Constructor<Singleton> constructor = Singleton.class.getDeclaredConstructor();
constructor.setAccessible(true);
Singleton s1 = constructor.newInstance();
Singleton s2 = constructor.newInstance();  // ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡

// é˜²èŒƒæ–¹æ³•1ï¼šæ„é€ å™¨æ£€æŸ¥
private Singleton() {
    if (instance != null) {
        throw new RuntimeException("å•ä¾‹æ¨¡å¼ç¦æ­¢åå°„åˆ›å»º");
    }
}

// é˜²èŒƒæ–¹æ³•2ï¼šæšä¸¾å•ä¾‹ï¼ˆæ¨èï¼‰
public enum Singleton {
    INSTANCE;
    // å¤©ç„¶é˜²æ­¢åå°„å’Œåºåˆ—åŒ–ç ´å
}
```

---

> **å­¦ä¹ å»ºè®®**ï¼šå•å…ƒæµ‹è¯•ã€åå°„ã€æ³¨è§£å’ŒåŠ¨æ€ä»£ç†æ˜¯ Java é«˜çº§ç¼–ç¨‹çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯ Spring ç­‰æ¡†æ¶çš„åŸºç¡€ã€‚å»ºè®®ç†è§£å…¶åŸç†ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨ã€‚ç‰¹åˆ«æ˜¯å•å…ƒæµ‹è¯•ï¼Œåº”è¯¥æˆä¸ºå¼€å‘ä¹ æƒ¯çš„ä¸€éƒ¨åˆ†ã€‚
